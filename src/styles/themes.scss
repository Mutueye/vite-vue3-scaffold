@use 'sass:color';
@use 'sass:map';
@use 'sass:math';

@use 'vars' as *;

// 基于element的css变量构建多主题样式

// color types
$types: primary, success, warning, danger, error, info;

// 混合模式
$mix-modes: light, dark;

.test-black {
  background-color: $black;
}

// 设置主题颜色的各级别css变量
@mixin set-color-css-var($type, $number, $mode, $mix-color, $base-color) {
  // TODO 修复此处重复设置变量的问题
  #{'--el-color-' + $type}: $base-color;
  #{'--el-color-' + $type + '-' + $mode + '-' + $number}: color.mix(
    $mix-color,
    $base-color,
    math.percentage(math.div($number, 10))
  );
}

// 蓝色主题
.blue {
  @each $type in $types {
    @each $mode in $mix-modes {
      @for $i from 1 through 9 {
        @include set-color-css-var(
          $type,
          $i,
          $mode,
          map.get($base-mode-colors, $mode),
          map.get($theme-blue-colors, $type)
        );
      }
    }
  }

  // 背景色 默认
  --el-bg-color: #ffffff;
  --el-bg-color-page: #f2f3f5;
  --el-bg-color-overlay: #ffffff;

  // 字色
  --el-text-color-primary: #131b26;
  --el-text-color-regular: #5f6165;
  --el-text-color-secondary: #96979c;
  --el-text-color-placeholder: #cacbd0;
  --el-text-color-disabled: #c0c4cc;

  // 边框颜色 默认
  // --el-border-color: #dcdfe6;
  // --el-border-color-light: #e4e7ed;
  // --el-border-color-lighter: #ebeef5;
  // --el-border-color-extra-light: #f2f6fc;
  // --el-border-color-dark: #d4d7de;
  // --el-border-color-darker: #cdd0d6;

  // 填充色 默认
  // --el-fill-color: #f0f2f5;
  // --el-fill-color-light: #f5f7fa;
  // --el-fill-color-lighter: #fafafa;
  // --el-fill-color-extra-light: #fafcff;
  // --el-fill-color-dark: #ebedf0;
  // --el-fill-color-darker: #e6e8eb;
  // --el-fill-color-blank: #ffffff;

  // 阴影 默认
  // --el-box-shadow: 0 12px 32px 4px rgb(0 0 0 / 4%), 0 8px 20px rgb(0 0 0 8%);
  // --el-box-shadow-light: 0px 0px 12px rgb(0 0 0 / 12%);
  // --el-box-shadow-lighter: 0px 0px 6px rgb(0 0 0 / 12%);
  // --el-box-shadow-dark: 0px 16px 48px 16px rgb(0 0 0 / 8%), 0px 12px 32px rgb(0 0 0 / 12%),
  //   0px 8px 16px -8px rgb(0 0 0 / 16%);

  // 禁用色 默认
  // --el-disabled-bg-color: var(--el-fill-color-light);
  // --el-disabled-text-color: var(--el-text-color-placeholder);
  // --el-disabled-border-color: var(--el-border-color-light);

  // overlay colors 默认
  // --el-overlay-color: rgb(0 0 0 / 80%);
  // --el-overlay-color-light: rgb(0 0 0 / 70%);
  // --el-overlay-color-lighter: rgb(0 0 0 / 50%);

  // mask colors 默认
  // --el-mask-color: rgb(255 255 255 / 90%);
  // --el-mask-color-extra-light: rgb(255 255 255 / 30%);

  // border vars 默认
  // --el-border-width: 1px;
  // --el-border-style: solid;
  // --el-border-color-hover: var(--el-text-color-disabled);
  // --el-border: var(--el-border-width) var(--el-border-style) var(--el-border-color);

  // 暗黑模式
  &.dark {
    @each $type in $types {
      @each $mode in $mix-modes {
        @for $i from 1 through 9 {
          @include set-color-css-var(
            $type,
            $i,
            $mode,
            map.get($dark-mode-colors, $mode),
            map.get($theme-blue-colors, $type)
          );
        }
      }
    }

    // 背景色 默认
    --el-bg-color: #222b45;
    --el-bg-color-page: #151a30;
    --el-bg-color-overlay: #222b45;

    // 字色
    --el-text-color-primary: #ffffff;
    --el-text-color-regular: #cfd3dc;
    --el-text-color-secondary: #a3a6ad;
    --el-text-color-placeholder: #8d9095;
    --el-text-color-disabled: #6c6e72;
  }
}

// 紫色主题
.purple {
  @each $type in $types {
    @each $mode in $mix-modes {
      @for $i from 1 through 9 {
        @include set-color-css-var(
          $type,
          $i,
          $mode,
          map.get($base-mode-colors, $mode),
          map.get($theme-purple-colors, $type)
        );
      }
    }
  }

  // 暗黑模式
  &.dark {
    @each $type in $types {
      @each $mode in $mix-modes {
        @for $i from 1 through 9 {
          @include set-color-css-var(
            $type,
            $i,
            $mode,
            map.get($dark-mode-colors, $mode),
            map.get($theme-purple-colors, $type)
          );
        }
      }
    }
  }
}
